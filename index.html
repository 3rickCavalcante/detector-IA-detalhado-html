<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analisador de Texto Acad√™mico - IA vs Humano</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; padding: 20px; 
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { text-align: center; color: white; margin-bottom: 40px; }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .app-card { 
            background: white; border-radius: 15px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); padding: 40px; 
            margin-bottom: 20px;
        }
        .text-area { 
            width: 100%; min-height: 200px; padding: 20px; 
            border: 2px solid #e2e8f0; border-radius: 10px; 
            font-size: 1rem; resize: vertical; margin-bottom: 20px;
            font-family: monospace; line-height: 1.6;
        }
        .analyze-btn { 
            background: #2563eb; color: white; border: none; 
            padding: 15px 30px; border-radius: 10px; font-size: 1.1rem; 
            cursor: pointer; width: 100%; margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        .analyze-btn:hover { background: #1d4ed8; transform: translateY(-2px); }
        .analyze-btn:disabled { background: #94a3b8; cursor: not-allowed; transform: none; }
        .result { margin-top: 20px; padding: 20px; background: #f8fafc; border-radius: 10px; }
        .stats { background: #e2e8f0; padding: 10px; border-radius: 5px; margin-bottom: 10px; }
        
        /* Estilos para padr√µes detectados */
        .padrao-detectado {
            background-color: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 3px;
            padding: 2px 4px;
            margin: 0 1px;
            cursor: help;
            position: relative;
        }
        .padrao-detectado:hover {
            background-color: #fde68a;
            z-index: 1000;
        }
        .padrao-detectado[data-tipo="padrao_ia"] { border-color: #ef4444; background-color: #fef2f2; }
        .padrao-detectado[data-tipo="escrita_humana"] { border-color: #10b981; background-color: #ecfdf5; }
        .padrao-detectado[data-tipo="repeticao"] { border-color: #dc2626; background-color: #fef2f2; }
        .padrao-detectado[data-tipo="estrutura_complexa"] { border-color: #7c3aed; background-color: #f5f3ff; }
        
        .texto-destacado {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            line-height: 1.8;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .relatorio-termos {
            margin-top: 20px;
        }
        
        .tipo-termo {
            background: #f8fafc;
            border-left: 4px solid #2563eb;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        
        .termo-item {
            background: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            border-left: 3px solid #94a3b8;
        }
        
        .legenda {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }
        
        .legenda-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: #f8fafc;
            border-radius: 5px;
            font-size: 0.9em;
        }
        
        .legenda-cor {
            width: 15px;
            height: 15px;
            border-radius: 3px;
        }
        
        .metricas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .metrica-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .metrica-valor {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .dica {
            background: #dbeafe;
            border-left: 4px solid #2563eb;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .contexto-info {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Analisador de Texto Acad√™mico - IA vs Humano</h1>
            <p>An√°lise especializada para textos de conclus√£o de curso e trabalhos acad√™micos</p>
        </div>
        
        <div class="app-card">
            <div class="contexto-info">
                <strong>‚ö†Ô∏è Contexto de Uso:</strong> Esta ferramenta foi desenvolvida para an√°lise de textos acad√™micos 
                produzidos por estudantes universit√°rios. Considera que a escrita acad√™mica formal √© uma caracter√≠stica 
                esperada e desej√°vel, n√£o um indicador de IA.
            </div>

            <h3>üìù Cole seu texto para an√°lise</h3>
            <textarea class="text-area" id="textInput" placeholder="Cole o texto acad√™mico que deseja analisar aqui..."></textarea>
            
            <div class="stats" id="textStats">
                Caracteres: 0 | Palavras: 0 | Frases: 0 | Par√°grafos: 0
            </div>
            
            <button class="analyze-btn" id="analyzeBtn">Analisar Texto Acad√™mico</button>
            <div id="result"></div>
        </div>
    </div>
    
    <script>
        // PADR√ïES REAIS DE IA - Focados em caracter√≠sticas genuinamente suspeitas
        const padroesIA = {
            'padroes_estereotipados': [
                // Padr√µes excessivamente gen√©ricos e repetitivos de IA
                'como um modelo de linguagem grande', 'treinado em vastos conjuntos de dados',
                'com base no meu treinamento', 'como uma ia', 'intelig√™ncia artificial',
                'modelo de linguagem', 'grande modelo de linguagem', 'assistente de ia',
                'devo enfatizar que', '√© crucial notar que', 'imperativo destacar',
                'cabe aqui sublinhar que', 'conv√©m aqui assinalar que'
            ],
            'excesso_qualificadores': [
                // Uso excessivo de qualificadores desnecess√°rios
                'profundamente significativo', 'extremamente relevante', 'altamente importante',
                'consideravelmente impactante', 'notavelmente crucial', 'expressivamente vital'
            ],
            'estruturas_formulas': [
                // Estruturas de f√≥rmula que parecem copiadas
                'neste contexto, √© importante considerar', 'um aspecto fundamental a ser abordado',
                'vale aqui ressaltar que', 'cabe aqui mencionar que', 'conv√©m aqui destacar que',
                'importa aqui sublinhar que', 'cumpre aqui assinalar que'
            ],
            'contradicoes_internas': [
                // Padr√µes que podem indicar contradi√ß√µes ou falta de coer√™ncia
                'por um lado.*por outro lado', 'embora.*√© importante', 'apesar disso.*deve-se considerar'
            ],
            'generalizacoes_excessivas': [
                // Generaliza√ß√µes vagas e excessivas
                '√© amplamente reconhecido que', 'como √© sabido', 'como √© de conhecimento geral',
                '√© universalmente aceito que', 'todos concordam que'
            ]
        };

        // PADR√ïES DE ESCRITA HUMANA EM CONTEXTO ACAD√äMICO
        const padroesHumanos = {
            'expressoes_academicas_legitimas': [
                // Express√µes acad√™micas normais e esperadas
                'de acordo com', 'segundo o autor', 'conforme proposto por',
                'como afirma', 'na perspectiva de', 'o autor defende que',
                'esta pesquisa demonstra', 'os resultados indicam', 'os dados mostram',
                'pode-se observar que', 'verifica-se que', 'constata-se que'
            ],
            'referencias_pessoais': [
                // Marcadores de envolvimento pessoal do autor
                'nesta pesquisa', 'no presente estudo', 'este trabalho busca',
                'pretende-se com este', 'o objetivo deste', 'parto do pressuposto',
                'acredito que', 'entendo que', 'considero que'
            ],
            'voz_ativa_academica': [
                // Uso de voz ativa em contexto acad√™mico
                'analiso', 'discuto', 'apresento', 'demonstro', 'argumento',
                'proponho', 'examino', 'investigo', 'avalia-se', 'discute-se'
            ],
            'elementos_contextuais': [
                // Elementos que mostram conhecimento do contexto
                'na universidade', 'no departamento', 'na disciplina',
                'orientado pelo professor', 'na bibliografia', 'nas leituras'
            ]
        };

        // Fun√ß√£o para tokenizar texto
        function tokenizacaoSimples(texto) {
            const palavras = texto.match(/\b\w+\b/g);
            return palavras ? palavras.map(p => p.toLowerCase()) : [];
        }

        // Fun√ß√£o para dividir frases
        function dividirFrases(texto) {
            const frases = texto.split(/[.!?]+(?:\s+|$)/);
            return frases.filter(f => f.trim()).map(f => f.trim());
        }

        // Fun√ß√£o para dividir par√°grafos
        function dividirParagrafos(texto) {
            const paragrafos = texto.split(/\n\s*\n/);
            return paragrafos.filter(p => p.trim()).map(p => p.trim());
        }

        // Fun√ß√£o para analisar repeti√ß√µes problem√°ticas
        function analisarRepeticoesProblematicas(frases) {
            const repeticoes = [];
            const frasesSimplificadas = frases.map(f => 
                f.toLowerCase().replace(/[^\w\s]/g, '').replace(/\s+/g, ' ').trim()
            );
            
            // Verificar repeti√ß√µes exatas em frases consecutivas
            for (let i = 0; i < frasesSimplificadas.length - 1; i++) {
                if (frasesSimplificadas[i] && frasesSimplificadas[i + 1] &&
                    frasesSimplificadas[i] === frasesSimplificadas[i + 1]) {
                    repeticoes.push({
                        frase: frases[i],
                        tipo: 'repeticao',
                        justificativa: 'Repeti√ß√£o exata em frases consecutivas - padr√£o comum em IA',
                        posicao: [i, i + 1]
                    });
                }
            }
            
            return repeticoes;
        }

        // Fun√ß√£o para analisar coer√™ncia e progress√£o argumentativa
        function analisarCoerencia(paragrafos) {
            const problemas = [];
            
            if (paragrafos.length < 2) return problemas;
            
            // Verificar transi√ß√µes entre par√°grafos
            for (let i = 0; i < paragrafos.length - 1; i++) {
                const paragrafoAtual = paragrafos[i].toLowerCase();
                const proximoParagrafo = paragrafos[i + 1].toLowerCase();
                
                // Verificar se h√° mudan√ßa abrupta de tema
                const palavrasChaveAtual = paragrafoAtual.split(/\s+/).slice(0, 10);
                const palavrasChaveProximo = proximoParagrafo.split(/\s+/).slice(0, 10);
                
                const palavrasComuns = palavrasChaveAtual.filter(palavra => 
                    palavrasChaveProximo.includes(palavra)
                );
                
                if (palavrasComuns.length === 0) {
                    problemas.push({
                        tipo: 'coerencia',
                        justificativa: 'Transi√ß√£o abrupta entre par√°grafos - poss√≠vel falta de coer√™ncia',
                        contexto: `Par√°grafos ${i + 1} e ${i + 2}`,
                        peso: 1.2
                    });
                }
            }
            
            return problemas;
        }

        // Fun√ß√£o para analisar padr√µes genuinamente suspeitos
        function analisarPadroesSuspeitos(texto) {
            const padroesDetectados = [];
            const textoLower = texto.toLowerCase();
            const frases = dividirFrases(texto);
            const paragrafos = dividirParagrafos(texto);
            
            // Analisar padr√µes estereotipados de IA
            padroesIA.padroes_estereotipados.forEach(expressao => {
                const regex = new RegExp(expressao, 'gi');
                let match;
                while ((match = regex.exec(textoLower)) !== null) {
                    padroesDetectados.push({
                        termo: texto.substring(match.index, match.index + match[0].length),
                        tipo: 'padrao_ia',
                        justificativa: 'Padr√£o estereotipado comum em textos gerados por IA',
                        contexto: texto.substring(
                            Math.max(0, match.index - 50), 
                            Math.min(texto.length, match.index + match[0].length + 50)
                        ),
                        posicao: [match.index, match.index + match[0].length],
                        peso: 1.8 // Alto peso para padr√µes genuinamente suspeitos
                    });
                }
            });
            
            // Analisar excesso de qualificadores
            padroesIA.excesso_qualificadores.forEach(qualificador => {
                const regex = new RegExp('\\b' + qualificador + '\\b', 'gi');
                let match;
                while ((match = regex.exec(textoLower)) !== null) {
                    padroesDetectados.push({
                        termo: texto.substring(match.index, match.index + match[0].length),
                        tipo: 'padrao_ia',
                        justificativa: 'Uso excessivo de qualificadores - padr√£o comum em IA',
                        contexto: texto.substring(
                            Math.max(0, match.index - 30), 
                            Math.min(texto.length, match.index + match[0].length + 30)
                        ),
                        posicao: [match.index, match.index + match[0].length],
                        peso: 1.3
                    });
                }
            });
            
            // Analisar repeti√ß√µes problem√°ticas
            const repeticoes = analisarRepeticoesProblematicas(frases);
            repeticoes.forEach(rep => {
                padroesDetectados.push({
                    termo: rep.frase.substring(0, 50) + (rep.frase.length > 50 ? '...' : ''),
                    tipo: 'repeticao',
                    justificativa: rep.justificativa,
                    contexto: rep.contexto,
                    posicao: [0, 0],
                    peso: 1.6
                });
            });
            
            // Analisar problemas de coer√™ncia
            const problemasCoerencia = analisarCoerencia(paragrafos);
            problemasCoerencia.forEach(prob => {
                padroesDetectados.push({
                    termo: prob.contexto,
                    tipo: 'coerencia',
                    justificativa: prob.justificativa,
                    contexto: prob.contexto,
                    posicao: [0, 0],
                    peso: prob.peso
                });
            });
            
            return padroesDetectados;
        }

        // Fun√ß√£o para analisar caracter√≠sticas humanas
        function analisarCaracteristicasHumanas(texto) {
            const caracteristicas = [];
            const textoLower = texto.toLowerCase();
            
            // Analisar express√µes acad√™micas leg√≠timas
            padroesHumanos.expressoes_academicas_legitimas.forEach(expressao => {
                const regex = new RegExp(expressao, 'gi');
                let match;
                while ((match = regex.exec(textoLower)) !== null) {
                    caracteristicas.push({
                        termo: texto.substring(match.index, match.index + match[0].length),
                        tipo: 'escrita_humana',
                        justificativa: 'Express√£o acad√™mica leg√≠tima e esperada',
                        contexto: texto.substring(
                            Math.max(0, match.index - 50), 
                            Math.min(texto.length, match.index + match[0].length + 50)
                        ),
                        posicao: [match.index, match.index + match[0].length],
                        peso: -0.8 // Peso negativo - indica escrita humana
                    });
                }
            });
            
            // Analisar refer√™ncias pessoais
            padroesHumanos.referencias_pessoais.forEach(referencia => {
                const regex = new RegExp(referencia, 'gi');
                let match;
                while ((match = regex.exec(textoLower)) !== null) {
                    caracteristicas.push({
                        termo: texto.substring(match.index, match.index + match[0].length),
                        tipo: 'escrita_humana',
                        justificativa: 'Marcador de envolvimento pessoal do autor',
                        contexto: texto.substring(
                            Math.max(0, match.index - 40), 
                            Math.min(texto.length, match.index + match[0].length + 40)
                        ),
                        posicao: [match.index, match.index + match[0].length],
                        peso: -1.2 // Forte indicador de escrita humana
                    });
                }
            });
            
            return caracteristicas;
        }

        // Fun√ß√£o para gerar texto destacado
        function gerarTextoDestacado(texto, padroesDetectados) {
            if (!padroesDetectados || padroesDetectados.length === 0) {
                return texto;
            }
            
            let textoDestacado = texto;
            const padroesOrdenados = [...padroesDetectados]
                .filter(padrao => padrao.posicao[0] !== 0)
                .sort((a, b) => b.posicao[0] - a.posicao[0]);
            
            padroesOrdenados.forEach(padraoInfo => {
                const [start, end] = padraoInfo.posicao;
                const termoOriginal = texto.substring(start, end);
                
                const spanDestacado = `<span class="padrao-detectado" data-tipo="${padraoInfo.tipo}" title="${padraoInfo.justificativa}">${termoOriginal}</span>`;
                
                textoDestacado = textoDestacado.substring(0, start) + spanDestacado + textoDestacado.substring(end);
            });
            
            return textoDestacado;
        }

        // Fun√ß√£o para extrair features do texto
        function extrairFeatures(texto) {
            const palavras = tokenizacaoSimples(texto);
            const frases = dividirFrases(texto);
            const paragrafos = dividirParagrafos(texto);
            
            const features = {};
            features.comprimento = texto.length;
            features.num_palavras = palavras.length;
            features.num_frases = frases.length;
            features.num_paragrafos = paragrafos.length;
            
            if (palavras.length > 0) {
                features.comp_medio_palavra = palavras.reduce((sum, p) => sum + p.length, 0) / palavras.length;
                features.palavras_por_frase = frases.length > 0 ? palavras.length / frases.length : 0;
                features.palavras_por_paragrafo = paragrafos.length > 0 ? palavras.length / paragrafos.length : 0;
                features.diversidade_lexical = new Set(palavras).size / palavras.length;
            } else {
                features.comp_medio_palavra = 0;
                features.palavras_por_frase = 0;
                features.palavras_por_paragrafo = 0;
                features.diversidade_lexical = 0;
            }
            
            return features;
        }

        // Fun√ß√£o principal de detec√ß√£o - ABORDAGEM CORRIGIDA
        function analisarTextoAcademico(texto) {
            if (!texto || texto.trim().length < 20) {
                return {
                    ai_probability: 0.5,
                    human_probability: 0.5,
                    confidence: 0.1,
                    padroes_detectados: [],
                    texto_destacado: texto,
                    metricas: {},
                    recomendacoes: []
                };
            }
            
            try {
                // An√°lise de padr√µes suspeitos (genu√≠nos)
                const padroesSuspeitos = analisarPadroesSuspeitos(texto);
                
                // An√°lise de caracter√≠sticas humanas
                const caracteristicasHumanas = analisarCaracteristicasHumanas(texto);
                
                // Combinar todas as detec√ß√µes
                const todasDetectoes = [...padroesSuspeitos, ...caracteristicasHumanas];
                const textoDestacado = gerarTextoDestacado(texto, todasDetectoes);
                
                // An√°lise de features b√°sicas
                const features = extrairFeatures(texto);
                
                // C√ÅLCULO CORRIGIDO - Considerando contexto acad√™mico
                let probIA = 0.2; // Base mais baixa - assumindo escrita humana acad√™mica
                
                // Apenas padr√µes genuinamente suspeitos aumentam probabilidade
                const padroesIASuspeitos = padroesSuspeitos.filter(p => p.peso > 0);
                if (padroesIASuspeitos.length > 0) {
                    const pesoTotal = padroesIASuspeitos.reduce((sum, padrao) => sum + padrao.peso, 0);
                    probIA = Math.min(0.9, probIA + (padroesIASuspeitos.length * 0.1 + pesoTotal * 0.05));
                }
                
                // Caracter√≠sticas humanas diminuem probabilidade
                const caracteristicasHumanasFortes = caracteristicasHumanas.filter(c => c.peso < 0);
                if (caracteristicasHumanasFortes.length > 0) {
                    const pesoTotal = caracteristicasHumanasFortes.reduce((sum, car) => sum + Math.abs(car.peso), 0);
                    probIA = Math.max(0.05, probIA - (caracteristicasHumanasFortes.length * 0.08 + pesoTotal * 0.03));
                }
                
                // Ajustes baseados em estrutura (mais conservadores)
                if (features.diversidade_lexical < 0.4) { // Apenas diversidade muito baixa
                    probIA += 0.15;
                }
                
                if (features.palavras_por_frase > 35) { // Apenas frases extremamente longas
                    probIA += 0.1;
                }
                
                // Limitar entre 0.05 e 0.9
                probIA = Math.max(0.05, Math.min(0.9, probIA));
                
                // Calcular confian√ßa (mais conservadora)
                let confianca = 0.4; // Base mais baixa
                confianca += Math.abs(probIA - 0.5) * 0.3;
                confianca += Math.min(0.2, padroesIASuspeitos.length * 0.08);
                confianca += Math.min(0.1, features.num_palavras / 1500);
                
                confianca = Math.max(0.2, Math.min(0.85, confianca));
                
                // Gerar recomenda√ß√µes
                const recomendacoes = [];
                if (probIA > 0.7) {
                    recomendacoes.push("Considere revisar o texto para incluir mais marcas de autoria pessoal");
                    recomendacoes.push("Verifique a coer√™ncia entre os par√°grafos");
                } else if (probIA < 0.3) {
                    recomendacoes.push("O texto apresenta fortes ind√≠cios de autoria humana");
                    recomendacoes.push("Mantenha o engajamento pessoal e a coer√™ncia argumentativa");
                }
                
                // Agrupar detec√ß√µes por tipo
                const padroesPorTipo = {};
                todasDetectoes.forEach(padrao => {
                    if (!padroesPorTipo[padrao.tipo]) {
                        padroesPorTipo[padrao.tipo] = [];
                    }
                    padroesPorTipo[padrao.tipo].push(padrao);
                });
                
                const resultado = {
                    ai_probability: Math.round(probIA * 1000) / 1000,
                    human_probability: Math.round((1 - probIA) * 1000) / 1000,
                    confidence: Math.round(confianca * 100) / 100,
                    text_analyzed_length: texto.length,
                    padroes_detectados: todasDetectoes,
                    texto_destacado: textoDestacado,
                    metricas: features,
                    recomendacoes: recomendacoes,
                    estatisticas: {
                        total_padroes: todasDetectoes.length,
                        padroes_ia: padroesIASuspeitos.length,
                        caracteristicas_humanas: caracteristicasHumanasFortes.length,
                        padroes_por_tipo: Object.fromEntries(
                            Object.entries(padroesPorTipo).map(([tipo, padroes]) => [tipo, padroes.length])
                        )
                    }
                };
                
                return resultado;
                
            } catch (e) {
                console.error("Erro na an√°lise:", e);
                return {
                    ai_probability: 0.5,
                    human_probability: 0.5,
                    confidence: 0.1,
                    padroes_detectados: [],
                    texto_destacado: texto,
                    metricas: {},
                    recomendacoes: []
                };
            }
        }

        // Fun√ß√£o para gerar relat√≥rio detalhado
        function gerarRelatorioDetalhado(result) {
            const todasDetectoes = result.padroes_detectados || [];
            const padroesIA = todasDetectoes.filter(p => p.tipo === 'padrao_ia' || p.tipo === 'repeticao' || p.tipo === 'coerencia');
            const caracteristicasHumanas = todasDetectoes.filter(p => p.tipo === 'escrita_humana');
            
            let relatorioHTML = '';
            
            // M√©tricas
            if (result.metricas) {
                const metricas = result.metricas;
                relatorioHTML += `
                    <div class="metricas">
                        <div class="metrica-card">
                            <div>Diversidade Lexical</div>
                            <div class="metrica-valor" style="color: ${metricas.diversidade_lexical > 0.5 ? '#10b981' : '#ef4444'}">
                                ${Math.round(metricas.diversidade_lexical * 100)}%
                            </div>
                            <small>${metricas.diversidade_lexical > 0.5 ? 'Boa variedade' : 'Pouca variedade'}</small>
                        </div>
                        <div class="metrica-card">
                            <div>Palavras por Frase</div>
                            <div class="metrica-valor" style="color: ${metricas.palavras_por_frase > 15 && metricas.palavras_por_frase < 30 ? '#10b981' : '#f59e0b'}">
                                ${Math.round(metricas.palavras_por_frase)}
                            </div>
                            <small>${metricas.palavras_por_frase > 30 ? 'Frases longas' : metricas.palavras_por_frase < 15 ? 'Frases curtas' : 'Equilibrado'}</small>
                        </div>
                        <div class="metrica-card">
                            <div>Par√°grafos</div>
                            <div class="metrica-valor" style="color: #2563eb">
                                ${metricas.num_paragrafos}
                            </div>
                            <small>Estrutura textual</small>
                        </div>
                        <div class="metrica-card">
                            <div>Padr√µes Detectados</div>
                            <div class="metrica-valor" style="color: ${padroesIA.length === 0 ? '#10b981' : '#ef4444'}">
                                ${padroesIA.length}
                            </div>
                            <small>${padroesIA.length === 0 ? 'Nenhum padr√£o suspeito' : 'Padr√µes suspeitos'}</small>
                        </div>
                    </div>
                `;
            }
            
            // Legenda
            relatorioHTML += `
                <div class="legenda">
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: #fef2f2; border: 1px solid #ef4444;"></div>
                        <span>Padr√µes de IA</span>
                    </div>
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: #ecfdf5; border: 1px solid #10b981;"></div>
                        <span>Escrita Humana</span>
                    </div>
                    <div class="legenda-item">
                        <div class="legenda-cor" style="background-color: #fef2f2; border: 1px solid #dc2626;"></div>
                        <span>Repeti√ß√µes</span>
                    </div>
                </div>
            `;
            
            // Texto destacado
            relatorioHTML += `
                <div class="texto-destacado">
                    <h5>Texto com padr√µes destacados:</h5>
                    <div>${result.texto_destacado}</div>
                </div>
            `;
            
            // Detalhamento dos padr√µes
            if (padroesIA.length > 0) {
                relatorioHTML += `
                    <div style="margin-top: 20px;">
                        <h5>üîç Padr√µes que podem indicar uso de IA:</h5>
                        ${padroesIA.map(padrao => `
                            <div class="termo-item">
                                <strong>"${padrao.termo}"</strong> - ${padrao.justificativa}
                                <br><small>Contexto: "...${padrao.contexto}..."</small>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Caracter√≠sticas humanas
            if (caracteristicasHumanas.length > 0) {
                relatorioHTML += `
                    <div style="margin-top: 20px;">
                        <h5>‚úÖ Caracter√≠sticas de escrita humana identificadas:</h5>
                        ${caracteristicasHumanas.map(caracteristica => `
                            <div class="termo-item">
                                <strong>"${caracteristica.termo}"</strong> - ${caracteristica.justificativa}
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            // Recomenda√ß√µes
            if (result.recomendacoes && result.recomendacoes.length > 0) {
                relatorioHTML += `
                    <div class="dica">
                        <h5>üí° Recomenda√ß√µes:</h5>
                        <ul>
                            ${result.recomendacoes.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            return relatorioHTML;
        }

        // Event listeners
        document.getElementById('textInput').addEventListener('input', function() {
            const text = this.value;
            const chars = text.length;
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            const sentences = text.split(/[.!?]+/).length - 1;
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim()).length;
            document.getElementById('textStats').innerHTML = 
                `Caracteres: ${chars} | Palavras: ${words} | Frases: ${sentences} | Par√°grafos: ${paragraphs}`;
        });

        document.getElementById('analyzeBtn').addEventListener('click', function() {
            const text = document.getElementById('textInput').value.trim();
            const resultDiv = document.getElementById('result');
            const button = document.getElementById('analyzeBtn');
            
            if (text.length < 20) {
                resultDiv.innerHTML = '<p style="color: red;">‚ö†Ô∏è Texto muito curto (m√≠nimo 20 caracteres)</p>';
                return;
            }
            
            button.disabled = true;
            button.textContent = 'Analisando...';
            resultDiv.innerHTML = '<p>‚è≥ Analisando texto acad√™mico...</p>';
            
            setTimeout(() => {
                try {
                    const result = analisarTextoAcademico(text);
                    const aiProb = Math.round(result.ai_probability * 100);
                    const humanProb = Math.round(result.human_probability * 100);
                    const confidence = Math.round(result.confidence * 100);
                    
                    let color = '#64748b';
                    let veredito = 'An√°lise Inconclusiva';
                    if (aiProb > 70) {
                        color = '#ef4444';
                        veredito = 'Caracter√≠sticas de IA Detectadas';
                    } else if (humanProb > 70) {
                        color = '#10b981';
                        veredito = 'Escrita Humana Prov√°vel';
                    }
                    
                    let relatorioHTML = gerarRelatorioDetalhado(result);
                    
                    resultDiv.innerHTML = `
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h3 style="color: ${color}">${veredito}</h3>
                            <p>ü§ñ Indicadores de IA: <strong style="font-size: 1.2em;">${aiProb}%</strong></p>
                            <p>üë§ Indicadores Humanos: <strong style="font-size: 1.2em;">${humanProb}%</strong></p>
                            <p>üìä Confian√ßa da an√°lise: ${confidence}%</p>
                        </div>
                        ${relatorioHTML}
                    `;
                } catch (error) {
                    console.error("Erro:", error);
                    resultDiv.innerHTML = '<p style="color: red;">‚ùå Erro na an√°lise. Tente novamente.</p>';
                } finally {
                    button.disabled = false;
                    button.textContent = 'Analisar Texto Acad√™mico';
                }
            }, 1000);
        });

        // Texto de exemplo acad√™mico
        document.getElementById('textInput').value = `Esta pesquisa busca analisar os impactos da transforma√ß√£o digital nas pr√°ticas pedag√≥gicas do ensino superior. Parto do pressuposto de que as tecnologias digitais, quando adequadamente integradas, podem potencializar os processos de ensino e aprendizagem.

No contexto universit√°rio atual, observa-se uma crescente incorpora√ß√£o de ferramentas digitais. Conforme demonstrado por Silva (2022), essa integra√ß√£o requer uma abordagem pedag√≥gica consistente. Os dados coletados nesta pesquisa indicam que os docentes que participaram da forma√ß√£o continuada mostraram maior propens√£o √† ado√ß√£o de novas tecnologias.

Considero que os resultados obtidos refor√ßam a import√¢ncia do desenvolvimento profissional docente para a efetiva integra√ß√£o tecnol√≥gica.`;

        document.getElementById('textInput').dispatchEvent(new Event('input'));
    </script>
</body>
</html>
